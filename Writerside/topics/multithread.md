# 멀티스레딩
자바는 멀티스레딩을 지원하므로 여러 스레드가 동시에 실행될 수 있다.
스택은 스레드 단위로 가지고 있지만, 힙 영역은 모든 스레드가 공유한다.
한 마디로 힙 영역에 저장된 배열/인스턴스(객체) 등은 동시에 접근될 수 있다.
스레드 간 공유되는 객체에 대해 동시 수정이 발생할 수 있다.

## JVM 메모리구조
JVM 메모리 구조는 크게 힙(Heap), 스택(Stack), 메소드 영역(Method Area), PC 레지스터, 네이티브 메소드 스택으로 구성됩니다. 각 영역은 서로 다른 목적과 역할을 가지고 있습니다.
힙 영역은 객체와 배열이 할당되는 곳으로, 가비지 컬렉션의 주 대상입니다. 스택 영역은 메소드 호출과 로컬 변수에 사용됩니다. 메소드 영역은 클래스 정보, 상수, 정적 변수 등을 저장합니다.

## DTO 관리
객체를 HashMap 타입의 매개변수로 넘겨주는 것과 DTO의 getter/setter로 관리하는 것의 차이는 객체의 불변성 여부다.
DTO는 불변성을 지킬 수 있지만 멀티스레딩 환경에서 공유될 수 있는 힙 메모리에 저장된다. 따라서 스레드 안정성을 지키기 위해선 몇 가지 조치를 해야한다.

## 자료형에 따른 메모리 영역
### primitive
- Call by Value 방식으로 작동
- 직접 값을 저장하고 복사할 때 값 자체를 복사함

### reference
* Call by Reference 방식으로 작동
* 객체의 주소만 저장하고 복사할 떄 주소가 복사됨
* 객체의 내용은 복사/저장하지 않음


### 참조문서
<a href="https://f-lab.kr/insight/understanding-java-and-jvm-memory-structure">F-Lab : 자바와 JVM 메모리 구조의 이해</a>